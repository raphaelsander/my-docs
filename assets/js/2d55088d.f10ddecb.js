"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[7307],{5169(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"network/bgp","title":"bgp","description":"O BGP (Border Gateway Protocol) \xe9 o principal protocolo de roteamento da","source":"@site/docs/network/bgp.mdx","sourceDirName":"network","slug":"/network/bgp","permalink":"/my-docs/docs/network/bgp","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"bgp","title":"bgp"},"sidebar":"tutorialSidebar","previous":{"title":"Network","permalink":"/my-docs/docs/category/network"},"next":{"title":"dns","permalink":"/my-docs/docs/network/dns"}}');var s=i(4848),o=i(8453);const l={id:"bgp",title:"bgp"},t=void 0,a={},c=[{value:"Sistema Aut\xf4nomo (AS)",id:"sistema-aut\xf4nomo-as",level:2},{value:"Para que serve o BGP?",id:"para-que-serve-o-bgp",level:2},{value:"Como o BGP funciona?",id:"como-o-bgp-funciona",level:2},{value:"Principais Atributos do BGP",id:"principais-atributos-do-bgp",level:2},{value:"AS-PATH",id:"as-path",level:3},{value:"NEXT_HOP",id:"next_hop",level:3},{value:"LOCAL_PREF",id:"local_pref",level:3},{value:"MED (Multi Exit Discriminator)",id:"med-multi-exit-discriminator",level:3},{value:"COMMUNITY",id:"community",level:3},{value:"Tipos de BGP",id:"tipos-de-bgp",level:2},{value:"eBGP (External BGP)",id:"ebgp-external-bgp",level:3},{value:"iBGP (Internal BGP)",id:"ibgp-internal-bgp",level:3},{value:"Caracter\xedsticas T\xe9cnicas",id:"caracter\xedsticas-t\xe9cnicas",level:2},{value:"Exemplo Pr\xe1tico (Multi-Homing)",id:"exemplo-pr\xe1tico-multi-homing",level:2},{value:"Problemas e Riscos",id:"problemas-e-riscos",level:2},{value:"Ferramentas P\xfablicas para Consulta BGP",id:"ferramentas-p\xfablicas-para-consulta-bgp",level:2},{value:"https://bgp.he.net",id:"httpsbgphenet",level:3},{value:"https://bgpview.io",id:"httpsbgpviewio",level:3},{value:"Resumo T\xe9cnico",id:"resumo-t\xe9cnico",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["O ",(0,s.jsx)(n.strong,{children:"BGP (Border Gateway Protocol)"})," \xe9 o principal protocolo de roteamento da\nInternet. Ele \xe9 respons\xe1vel por trocar informa\xe7\xf5es de rotas\n",(0,s.jsx)(n.strong,{children:"entre Sistemas Aut\xf4nomos (AS \u2013 Autonomous Systems)"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Se protocolos como ",(0,s.jsx)(n.strong,{children:"OSPF"})," e ",(0,s.jsx)(n.strong,{children:"RIP"})," s\xe3o usados dentro de uma rede (IGP \u2013\nInterior Gateway Protocol), o BGP \xe9 usado\n",(0,s.jsx)(n.strong,{children:"entre redes diferentes (EGP \u2013 Exterior Gateway Protocol)"})," \u2014 principalmente\nentre provedores, grandes empresas, data centers e provedores de nuvem."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"sistema-aut\xf4nomo-as",children:"Sistema Aut\xf4nomo (AS)"}),"\n",(0,s.jsxs)(n.p,{children:["Um ",(0,s.jsx)(n.strong,{children:"Sistema Aut\xf4nomo (AS)"})," \xe9 um conjunto de redes IP sob uma \xfanica\nadministra\xe7\xe3o t\xe9cnica, identificado por um n\xfamero \xfanico chamado:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-none",children:"ASN \u2013 Autonomous System Number\n"})}),"\n",(0,s.jsx)(n.p,{children:"Exemplos:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Seu ISP \u2192 possui um ASN"}),"\n",(0,s.jsx)(n.li,{children:"Google \u2192 AS15169"}),"\n",(0,s.jsx)(n.li,{children:"Cloudflare \u2192 AS13335"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["A comunica\xe7\xe3o entre esses AS ocorre utilizando ",(0,s.jsx)(n.strong,{children:"BGP"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"para-que-serve-o-bgp",children:"Para que serve o BGP?"}),"\n",(0,s.jsx)(n.p,{children:"O BGP permite:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Descobrir quais redes existem na Internet"}),"\n",(0,s.jsx)(n.li,{children:"Determinar o melhor caminho at\xe9 um prefixo IP"}),"\n",(0,s.jsx)(n.li,{children:"Implementar pol\xedticas de roteamento"}),"\n",(0,s.jsx)(n.li,{children:"Conectar m\xfaltiplos provedores (multi-homing)"}),"\n",(0,s.jsx)(n.li,{children:"Garantir redund\xe2ncia e controle de tr\xe1fego"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Sem BGP, a Internet global n\xe3o funcionaria."}),"\n",(0,s.jsx)(n.h2,{id:"como-o-bgp-funciona",children:"Como o BGP funciona?"}),"\n",(0,s.jsxs)(n.p,{children:["O BGP \xe9 um protocolo do tipo ",(0,s.jsx)(n.strong,{children:"Path Vector"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Diferente de protocolos como OSPF, que escolhem rotas com base em custo ou\nm\xe9trica t\xe9cnica, o BGP \xe9:"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Baseado em pol\xedticas administrativas"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Ele utiliza atributos para tomar decis\xf5es de roteamento."}),"\n",(0,s.jsx)(n.h2,{id:"principais-atributos-do-bgp",children:"Principais Atributos do BGP"}),"\n",(0,s.jsx)(n.h3,{id:"as-path",children:"AS-PATH"}),"\n",(0,s.jsx)(n.p,{children:"Lista de AS pelos quais o prefixo passou."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Quanto menor, geralmente mais prefer\xedvel"}),"\n",(0,s.jsx)(n.li,{children:"Previne loops"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-none",children:"AS 65001 \u2192 65010 \u2192 15169\n"})}),"\n",(0,s.jsx)(n.h3,{id:"next_hop",children:"NEXT_HOP"}),"\n",(0,s.jsx)(n.p,{children:"Define o pr\xf3ximo salto para alcan\xe7ar o prefixo."}),"\n",(0,s.jsx)(n.h3,{id:"local_pref",children:"LOCAL_PREF"}),"\n",(0,s.jsx)(n.p,{children:"Prefer\xeancia interna dentro do AS."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Quanto maior, mais preferido"}),"\n",(0,s.jsx)(n.li,{children:"Controla o tr\xe1fego de sa\xedda"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"med-multi-exit-discriminator",children:"MED (Multi Exit Discriminator)"}),"\n",(0,s.jsx)(n.p,{children:"Sugere qual link deve ser usado quando existem m\xfaltiplas conex\xf5es entre dois AS."}),"\n",(0,s.jsx)(n.h3,{id:"community",children:"COMMUNITY"}),"\n",(0,s.jsx)(n.p,{children:"Permite marcar rotas com \u201ctags\u201d para aplica\xe7\xe3o de pol\xedticas espec\xedficas."}),"\n",(0,s.jsx)(n.p,{children:"Muito utilizado por ISPs e ambientes multi-homed."}),"\n",(0,s.jsx)(n.h2,{id:"tipos-de-bgp",children:"Tipos de BGP"}),"\n",(0,s.jsx)(n.h3,{id:"ebgp-external-bgp",children:"eBGP (External BGP)"}),"\n",(0,s.jsx)(n.p,{children:"Utilizado entre AS diferentes."}),"\n",(0,s.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-none",children:"Seu ASN \u2194 Provedor\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ibgp-internal-bgp",children:"iBGP (Internal BGP)"}),"\n",(0,s.jsx)(n.p,{children:"Utilizado dentro do mesmo AS para distribuir rotas aprendidas externamente."}),"\n",(0,s.jsx)(n.p,{children:"Em redes grandes, costuma-se usar:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Route Reflectors"}),"\n",(0,s.jsx)(n.li,{children:"Confederations"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"caracter\xedsticas-t\xe9cnicas",children:"Caracter\xedsticas T\xe9cnicas"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Utiliza ",(0,s.jsx)(n.strong,{children:"TCP porta 179"})]}),"\n",(0,s.jsx)(n.li,{children:"Sess\xf5es estabelecidas manualmente (n\xe3o h\xe1 auto-discovery)"}),"\n",(0,s.jsx)(n.li,{children:"Alta escalabilidade"}),"\n",(0,s.jsx)(n.li,{children:"Converg\xeancia mais lenta que IGPs"}),"\n",(0,s.jsx)(n.li,{children:"Baseado em troca incremental de rotas"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"exemplo-pr\xe1tico-multi-homing",children:"Exemplo Pr\xe1tico (Multi-Homing)"}),"\n",(0,s.jsx)(n.p,{children:"Cen\xe1rio:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ASN pr\xf3prio"}),"\n",(0,s.jsx)(n.li,{children:"Prefixo pr\xf3prio (/24 ou maior)"}),"\n",(0,s.jsx)(n.li,{children:"Dois links com provedores diferentes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Com BGP \xe9 poss\xedvel:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Anunciar o prefixo para ambos provedores"}),"\n",(0,s.jsx)(n.li,{children:"Controlar por qual link o tr\xe1fego sai (LOCAL_PREF)"}),"\n",(0,s.jsx)(n.li,{children:"Influenciar por qual link o tr\xe1fego entra (AS-PATH prepend, communities)"}),"\n",(0,s.jsx)(n.li,{children:"Garantir failover autom\xe1tico"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"problemas-e-riscos",children:"Problemas e Riscos"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Route Leaks"}),"\n",(0,s.jsx)(n.li,{children:"BGP Hijacking"}),"\n",(0,s.jsx)(n.li,{children:"Configura\xe7\xf5es incorretas podem afetar grande parte da Internet"}),"\n",(0,s.jsx)(n.li,{children:"Depend\xeancia de boas pr\xe1ticas (RPKI, prefix filtering)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ferramentas-p\xfablicas-para-consulta-bgp",children:"Ferramentas P\xfablicas para Consulta BGP"}),"\n",(0,s.jsx)(n.h3,{id:"httpsbgphenet",children:(0,s.jsx)(n.a,{href:"https://bgp.he.net",children:"https://bgp.he.net"})}),"\n",(0,s.jsxs)(n.p,{children:["O ",(0,s.jsx)(n.strong,{children:"Hurricane Electric BGP Toolkit"})," permite:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Consultar ASN"}),"\n",(0,s.jsx)(n.li,{children:"Ver an\xfancios de prefixos"}),"\n",(0,s.jsx)(n.li,{children:"Visualizar peers"}),"\n",(0,s.jsx)(n.li,{children:"Analisar AS-PATH"}),"\n",(0,s.jsx)(n.li,{children:"Ver gr\xe1ficos hist\xf3ricos"}),"\n",(0,s.jsx)(n.li,{children:"Consultar informa\xe7\xf5es de RPKI"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Muito utilizado para troubleshooting e an\xe1lise de roteamento global."}),"\n",(0,s.jsx)(n.h3,{id:"httpsbgpviewio",children:(0,s.jsx)(n.a,{href:"https://bgpview.io",children:"https://bgpview.io"})}),"\n",(0,s.jsxs)(n.p,{children:["O ",(0,s.jsx)(n.strong,{children:"BGPView"})," fornece:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Informa\xe7\xf5es detalhadas sobre ASN"}),"\n",(0,s.jsx)(n.li,{children:"Prefixos anunciados"}),"\n",(0,s.jsx)(n.li,{children:"Rela\xe7\xf5es de peering"}),"\n",(0,s.jsx)(n.li,{children:"Hist\xf3rico de an\xfancios"}),"\n",(0,s.jsx)(n.li,{children:"Dados agregados de m\xfaltiplas fontes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Interface mais moderna e de f\xe1cil navega\xe7\xe3o para consultas r\xe1pidas."}),"\n",(0,s.jsx)(n.h2,{id:"resumo-t\xe9cnico",children:"Resumo T\xe9cnico"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Caracter\xedstica"}),(0,s.jsx)(n.th,{children:"BGP"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Tipo"}),(0,s.jsx)(n.td,{children:"Path Vector"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Porta"}),(0,s.jsx)(n.td,{children:"TCP 179"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Escopo"}),(0,s.jsx)(n.td,{children:"Entre Sistemas Aut\xf4nomos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Baseado em"}),(0,s.jsx)(n.td,{children:"Pol\xedticas"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Escalabilidade"}),(0,s.jsx)(n.td,{children:"Internet global"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Suporte a IPv6"}),(0,s.jsx)(n.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,s.jsx)(n.p,{children:'O BGP \xe9 o protocolo que sustenta a Internet. Ele n\xe3o escolhe apenas o caminho\n"mais curto", mas sim o caminho definido por pol\xedticas administrativas,\npermitindo controle granular, redund\xe2ncia e engenharia de tr\xe1fego em escala\nglobal.'})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>t});var r=i(6540);const s={},o=r.createContext(s);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);