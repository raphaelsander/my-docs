"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[2132],{4759:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>i,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"pentest/john","title":"john","description":"O John The Ripper, muitas vezes abreviado como \\"John\\", \xe9 uma das ferramentas de","source":"@site/docs/pentest/john.mdx","sourceDirName":"pentest","slug":"/pentest/john","permalink":"/my-docs/docs/pentest/john","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"john","title":"john"},"sidebar":"tutorialSidebar","previous":{"title":"httpx","permalink":"/my-docs/docs/pentest/httpx"},"next":{"title":"msfvenom","permalink":"/my-docs/docs/pentest/msfvenom"}}');var r=s(4848),o=s(8453);const i={id:"john",title:"john"},d=void 0,c={},t=[{value:"Quebra de Senha no Linux",id:"quebra-de-senha-no-linux",level:2},{value:"Concatenar os Arquivos <code>/etc/passwd</code> e <code>/etc/shadow</code>",id:"concatenar-os-arquivos-etcpasswd-e-etcshadow",level:3},{value:"Quebrar Senhas",id:"quebrar-senhas",level:3},{value:"Diret\xf3rio de Wordlist Padr\xe3o",id:"diret\xf3rio-de-wordlist-padr\xe3o",level:3},{value:"Adicionando Regras Personalizadas",id:"adicionando-regras-personalizadas",level:3},{value:"Utilizando uma Wordlist Personalizada",id:"utilizando-uma-wordlist-personalizada",level:3},{value:"Quebra de GPG",id:"quebra-de-gpg",level:2},{value:"Converter GPG para Hash",id:"converter-gpg-para-hash",level:3},{value:"Iniciar a Quebra do Hash",id:"iniciar-a-quebra-do-hash",level:3},{value:"For\xe7a bruta em hash <code>yescrypt</code>",id:"for\xe7a-bruta-em-hash-yescrypt",level:2},{value:"Refer\xeancias",id:"refer\xeancias",level:3}];function h(e){const a={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{children:'O John The Ripper, muitas vezes abreviado como "John", \xe9 uma das ferramentas de\nquebra de senha mais renomadas e amplamente utilizadas no mundo da seguran\xe7a da\ninforma\xe7\xe3o e teste de penetra\xe7\xe3o. Desenvolvido originalmente para sistemas Unix\ne Linux, o John The Ripper \xe9 uma aplica\xe7\xe3o de linha de comando que tem como\nobjetivo principal a recupera\xe7\xe3o de senhas perdidas ou esquecidas.'}),"\n",(0,r.jsx)(a.p,{children:"O software ganhou notoriedade devido \xe0 sua efici\xeancia e capacidade de quebrar\nsenhas por meio de diversos m\xe9todos, como ataques de for\xe7a bruta, dicion\xe1rios de\npalavras, ataques de for\xe7a bruta baseados em regras, entre outros. Ele tamb\xe9m \xe9\ncapaz de lidar com diferentes formatos de senhas, incluindo senhas\ncriptografadas em sistemas Unix/Linux e senhas de arquivos GPG (GnuPG)."}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"quebra-de-senha-no-linux",children:"Quebra de Senha no Linux"}),"\n",(0,r.jsx)(a.p,{children:"John The Ripper \xe9 uma ferramenta poderosa para quebra de senhas no Linux. Para\nutiliz\xe1-lo, siga os passos abaixo:"}),"\n",(0,r.jsxs)(a.h3,{id:"concatenar-os-arquivos-etcpasswd-e-etcshadow",children:["Concatenar os Arquivos ",(0,r.jsx)(a.code,{children:"/etc/passwd"})," e ",(0,r.jsx)(a.code,{children:"/etc/shadow"})]}),"\n",(0,r.jsxs)(a.p,{children:["Para que o John The Ripper possa trabalhar com senhas do sistema, voc\xea precisa\nconcatenar os arquivos ",(0,r.jsx)(a.code,{children:"/etc/passwd"})," e ",(0,r.jsx)(a.code,{children:"/etc/shadow"})," em um \xfanico arquivo. Voc\xea\npode fazer isso com o seguinte comando:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"unshadow /etc/passwd /etc/shadow >> 2crack\n"})}),"\n",(0,r.jsx)(a.admonition,{type:"info",children:(0,r.jsxs)(a.p,{children:["Isso criar\xe1 um arquivo chamado ",(0,r.jsx)(a.code,{children:"2crack"})," que cont\xe9m as informa\xe7\xf5es necess\xe1rias\npara quebrar as senhas."]})}),"\n",(0,r.jsx)(a.h3,{id:"quebrar-senhas",children:"Quebrar Senhas"}),"\n",(0,r.jsxs)(a.p,{children:["Agora que voc\xea tem o arquivo ",(0,r.jsx)(a.code,{children:"2crack"}),", pode usar o John The Ripper para quebrar\nas senhas:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"john 2crack\n"})}),"\n",(0,r.jsxs)(a.p,{children:["O John The Ripper usar\xe1 seu mecanismo de quebra de senha para tentar descobrir\nas senhas contidas no arquivo ",(0,r.jsx)(a.code,{children:"2crack"}),". Certifique-se de que o programa esteja\nconfigurado corretamente para utilizar dicion\xe1rios de palavras e regras para\nmaximizar suas chances de sucesso."]}),"\n",(0,r.jsx)(a.h3,{id:"diret\xf3rio-de-wordlist-padr\xe3o",children:"Diret\xf3rio de Wordlist Padr\xe3o"}),"\n",(0,r.jsxs)(a.p,{children:["O John The Ripper possui um diret\xf3rio de wordlists padr\xe3o em\n",(0,r.jsx)(a.code,{children:"/usr/share/john/password.lst"}),". Voc\xea pode verificar o n\xfamero de linhas em uma\nwordlist da seguinte maneira:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"wc -l /usr/share/john/password.lst\n"})}),"\n",(0,r.jsx)(a.p,{children:"Isso fornecer\xe1 o n\xfamero de palavras na wordlist padr\xe3o."}),"\n",(0,r.jsx)(a.h3,{id:"adicionando-regras-personalizadas",children:"Adicionando Regras Personalizadas"}),"\n",(0,r.jsxs)(a.p,{children:["Voc\xea pode personalizar a cria\xe7\xe3o de wordlists mut\xe1veis adicionando regras ao\narquivo de configura\xe7\xe3o do John The Ripper, que geralmente est\xe1 localizado em\n",(0,r.jsx)(a.code,{children:"/etc/john/john.conf"}),". Por exemplo:"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"$$[0-9]$$[0-9]"})," ==> Adiciona dois n\xfameros no final da palavra."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"^[0-9]"})," ==> Adiciona um n\xfamero no come\xe7o da palavra."]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Voc\xea pode usar essas regras para criar wordlists mais eficazes para quebra de\nsenhas espec\xedficas."}),"\n",(0,r.jsx)(a.h3,{id:"utilizando-uma-wordlist-personalizada",children:"Utilizando uma Wordlist Personalizada"}),"\n",(0,r.jsx)(a.p,{children:"Para usar uma wordlist personalizada durante a quebra de senhas, voc\xea pode usar\no seguinte comando:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"john --wordlist=words.txt --rules --stdout > mutacao.txt\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Isso instruir\xe1 o John The Ripper a usar a wordlist ",(0,r.jsx)(a.code,{children:"words.txt"})," com as regras\ndefinidas no arquivo de configura\xe7\xe3o e a salvar os resultados em ",(0,r.jsx)(a.code,{children:"mutacao.txt"}),"."]}),"\n",(0,r.jsx)(a.h2,{id:"quebra-de-gpg",children:"Quebra de GPG"}),"\n",(0,r.jsx)(a.p,{children:"O John The Ripper tamb\xe9m pode ser usado para quebrar senhas de arquivos\ncriptografados com GPG. Siga os passos abaixo:"}),"\n",(0,r.jsx)(a.h3,{id:"converter-gpg-para-hash",children:"Converter GPG para Hash"}),"\n",(0,r.jsx)(a.p,{children:"Primeiro, voc\xea precisa converter o arquivo GPG em um formato que o John The\nRipper possa entender. Fa\xe7a isso com o comando:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"gpg2john lab1.gpg > hash\n"})}),"\n",(0,r.jsx)(a.admonition,{type:"info",children:(0,r.jsxs)(a.p,{children:["Isso criar\xe1 um arquivo ",(0,r.jsx)(a.code,{children:"hash"})," que cont\xe9m as informa\xe7\xf5es do arquivo GPG no\nformato apropriado para a quebra de senha."]})}),"\n",(0,r.jsx)(a.h3,{id:"iniciar-a-quebra-do-hash",children:"Iniciar a Quebra do Hash"}),"\n",(0,r.jsxs)(a.p,{children:["Agora, voc\xea pode iniciar o processo de quebra de senha com o John The Ripper,\nusando uma wordlist, como ",(0,r.jsx)(a.code,{children:"rockyou.txt"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"john --wordlist=rockyou.txt hash\n"})}),"\n",(0,r.jsx)(a.admonition,{type:"info",children:(0,r.jsx)(a.p,{children:"O John The Ripper tentar\xe1 quebrar a senha do arquivo GPG usando a wordlist\nespecificada. Certifique-se de usar uma wordlist adequada \xe0s caracter\xedsticas da\nsenha que voc\xea est\xe1 tentando quebrar."})}),"\n",(0,r.jsx)(a.p,{children:"Refer\xeancia adicional:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"https://www.ubuntuvibes.com/2012/10/recover-your-gpg-passphrase-using-john.html",children:"https://www.ubuntuvibes.com/2012/10/recover-your-gpg-passphrase-using-john.html"})}),"\n"]}),"\n",(0,r.jsxs)(a.h2,{id:"for\xe7a-bruta-em-hash-yescrypt",children:["For\xe7a bruta em hash ",(0,r.jsx)(a.code,{children:"yescrypt"})]}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.em,{children:"yescrypt"})," \xe9 um KDF (key-derivation function) projetado para hashing de senhas:\n\xe9 memory-hard e tunable \u2014 ou seja, consome bastante RAM al\xe9m de CPU, o que\ndificulta ataques em ASICs/GPUs."]}),"\n",(0,r.jsxs)(a.p,{children:["Deriva do scrypt e adiciona op\xe7\xf5es/mesclas (mais par\xe2metros, salt/nonce\navan\xe7ados e prote\xe7\xf5es contra paralelismo massivo), oferecendo resist\xeancia maior\na ataques por hardware especializado, ou seja, na quebra utilizando Hashcat ou\nqualquer ferramenta de brute foce em ",(0,r.jsx)(a.em,{children:"hash"}),", mesmo que estiver utilizando placas\nde v\xeddeo mais atuais e com maior poder de processamento, n\xe3o ir\xe1 aumentar a taxa\nde ",(0,r.jsx)(a.em,{children:"hashes"})," por segundo, ou seja, uma ",(0,r.jsx)(a.strong,{children:"Nvidia GTX1050"})," pode ter um\n",(0,r.jsx)(a.strong,{children:"hash rate"})," muito pr\xf3ximo de uma ",(0,r.jsx)(a.strong,{children:"Nvidia RTX5090"}),"."]}),"\n",(0,r.jsx)(a.p,{children:"\xc9 usado para proteger senhas em sistemas modernos (por exemplo, implementa\xe7\xf5es\nem bibliotecas de criptografia/libxcrypt) e permite ajustar custo de tempo e\nmem\xf3ria conforme a amea\xe7a."}),"\n",(0,r.jsxs)(a.p,{children:["Nesse exemplo o ",(0,r.jsx)(a.em,{children:"hash"})," foi encontrado no arquivo ",(0,r.jsx)(a.code,{children:"/etc/shadow"})," no sistema\noperacional Kali Linux, quando iniciado com ",(0,r.jsx)(a.code,{children:"$y"})," significa que \xe9 ",(0,r.jsx)(a.code,{children:"yescrypt"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"$ sudo cat /etc/shadow\n[sudo] password for kali: ****\nroot:*:19966:0:99999:7:::\ndaemon:*:19966:0:99999:7:::\nbin:*:19966:0:99999:7:::\nsys:*:19966:0:99999:7:::\nsync:*:19966:0:99999:7:::\ngames:*:19966:0:99999:7:::\nman:*:19966:0:99999:7:::\nlp:*:19966:0:99999:7:::\nmail:*:19966:0:99999:7:::\nnews:*:19966:0:99999:7:::\nuucp:*:19966:0:99999:7:::\nproxy:*:19966:0:99999:7:::\nwww-data:*:19966:0:99999:7:::\nbackup:*:19966:0:99999:7:::\nlist:*:19966:0:99999:7:::\nirc:*:19966:0:99999:7:::\n_apt:*:19966:0:99999:7:::\nnobody:*:19966:0:99999:7:::\nsystemd-network:!*:19966::::::\nmessagebus:!:19966::::::\ntcpdump:!:19966::::::\nsshd:!:19966::::::\nkali:$y$j9T$P4e5rDVu4IoZc9phsGnXr0$Bug5WTkDSra/pzgNbm7aFWTJAa1RSO5iI5msAaADYCC:19996:0:99999:7:::\n_rpc:!:20366::::::\nstatd:!:20366::::::\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Nesse aquivos podemos notar o usu\xe1rio ",(0,r.jsx)(a.code,{children:"kali"})," e seu respectivo ",(0,r.jsx)(a.em,{children:"hash"}),",\ncorrespondente \xe0 sua senha."]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-none",children:"kali:$y$j9T$P4e5rDVu4IoZc9phsGnXr0$Bug5WTkDSra/pzgNbm7aFWTJAa1RSO5iI5msAaADYCC:19996:0:99999:7:30:3403031096:\n"})}),"\n",(0,r.jsx)(a.p,{children:"Fazendo a decomposi\xe7\xe3o dessa linha em v\xe1rias partes temos:"}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.code,{children:"kali"}),": ID do usu\xe1rio.",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"$y$j9T$P4e5rDVu4IoZc9phsGnXr0$Bug5WTkDSra/pzgNbm7aFWTJAa1RSO5iI5msAaADYCC"}),":\nInforma\xe7\xf5es do algoritmo ",(0,r.jsx)(a.em,{children:"hash"})," e o pr\xf3prio ",(0,r.jsx)(a.em,{children:"hash"}),".",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"19996"}),'": \xdaltima altera\xe7\xe3o de senha em Unix time.',(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"0"}),": O n\xfamero m\xednimo de dias necess\xe1rios entre as altera\xe7\xf5es de senha.",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"99999"}),": O n\xfamero m\xe1ximo de dias em que a senha \xe9 v\xe1lida.",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"7"}),": O n\xfamero de dias antes da expira\xe7\xe3o da senha em que o usu\xe1rio \xe9 avisado de\nque sua senha deve ser alterada.",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"30"}),": O n\xfamero de dias ap\xf3s a expira\xe7\xe3o da senha em que a conta \xe9 desativada.",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"3403031096"}),": A data de expira\xe7\xe3o da conta em Unix time."]}),"\n",(0,r.jsxs)(a.p,{children:["Fazendo a decomposi\xe7\xe3o da parte destinada ao hash e sua informa\xe7\xf5es, com\ndelimitador ",(0,r.jsx)(a.code,{children:"$"}),", temos:"]}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.code,{children:"y"})," ==> algor\xedtmo",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"j9T"})," ==> par\xe2metro",(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"P4e5rDVu4IoZc9phsGnXr0"})," ==> salt em ",(0,r.jsx)(a.em,{children:"crypt base64"}),(0,r.jsx)(a.br,{}),"\n",(0,r.jsx)(a.code,{children:"Bug5WTkDSra/pzgNbm7aFWTJAa1RSO5iI5msAaADYCC"})," ==> digest em ",(0,r.jsx)(a.em,{children:"crypt base64"})]}),"\n",(0,r.jsx)(a.p,{children:"Efetuando a quebra com John the Ripper:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"echo '$y$j9T$P4e5rDVu4IoZc9phsGnXr0$Bug5WTkDSra/pzgNbm7aFWTJAa1RSO5iI5msAaADYCC' > hash.txt\njohn --wordlist=/usr/share/wordlists/rockyou.txt --format=crypt hash.txt\n"})}),"\n",(0,r.jsx)(a.h3,{id:"refer\xeancias",children:"Refer\xeancias"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"https://www.cyberciti.biz/faq/understanding-etcshadow-file/",children:"https://www.cyberciti.biz/faq/understanding-etcshadow-file/"})}),"\n"]})]})}function l(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,a,s)=>{s.d(a,{R:()=>i,x:()=>d});var n=s(6540);const r={},o=n.createContext(r);function i(e){const a=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(o.Provider,{value:a},e.children)}}}]);