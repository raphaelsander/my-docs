"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[6139],{3610(e,n,o){o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"linux/host","title":"host","description":"O host \xe9 uma ferramenta simples para consultas DNS. \xc9 \xfatil durante a fase de","source":"@site/docs/linux/host.mdx","sourceDirName":"linux","slug":"/linux/host","permalink":"/my-docs/docs/linux/host","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"host","title":"host"},"sidebar":"tutorialSidebar","previous":{"title":"grep","permalink":"/my-docs/docs/linux/grep"},"next":{"title":"ip-protocols","permalink":"/my-docs/docs/linux/ip-protocols"}}');var a=o(4848),r=o(8453);const i={id:"host",title:"host"},t=void 0,d={},l=[{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:2},{value:"Uso Simples",id:"uso-simples",level:2},{value:"Zone Transfer (Transfer\xeancia de Zona)",id:"zone-transfer-transfer\xeancia-de-zona",level:2},{value:"PTR - DNS Reverso",id:"ptr---dns-reverso",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["O ",(0,a.jsx)(n.code,{children:"host"})," \xe9 uma ferramenta simples para consultas DNS. \xc9 \xfatil durante a ",(0,a.jsx)(n.strong,{children:"fase de\nreconhecimento"})," para descobrir endere\xe7os IP, registros de e\u2011mail, servidores de\nnome e, ocasionalmente, obter transfer\xeancias de zone mal configuradas."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"instala\xe7\xe3o",children:"Instala\xe7\xe3o"}),"\n",(0,a.jsx)(n.p,{children:"Debian/Ubuntu:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt install bind9-dnsutils  # inclui host, dig, nslookup\n"})}),"\n",(0,a.jsx)(n.h2,{id:"uso-simples",children:"Uso Simples"}),"\n",(0,a.jsx)(n.p,{children:"Consultar o(s) registro(s) A (endere\xe7os IPv4) do dom\xednio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ host -t A alvo.com\nalvo.com has address 203.0.113.42\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"dom\xednio pode ter m\xfaltiplos registros A (round-robin / multiple frontends)."})}),"\n",(0,a.jsx)(n.p,{children:"Listar os registros MX \u2014 servidores respons\xe1veis por receber e\u2011mail para o\ndom\xednio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ host -t mx alvo.com\nalvo.com mail is handled by 10 mx1.alvo.com.\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"Com essa enumera\xe7\xe3o podemos identificar servidores de e\u2011mail, poss\xedveis pontos\npara engenharia social, usernames discovery (via VRFY/EXPN quando habilitado) ou\nservi\xe7os expostos (SMTP, webmail).\nO n\xfamero antes do hostname (10) \xe9 a prioridade MX."})}),"\n",(0,a.jsx)(n.p,{children:"Retorna os nameservers autoritativos do dom\xednio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ host -t ns alvo.com\nalvo.com name server ns1.alvo.com.\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"Os nameservers enumerados podem ser utilizados para consultas diretas ou\ntentativas de zone transfer."})}),"\n",(0,a.jsx)(n.h2,{id:"zone-transfer-transfer\xeancia-de-zona",children:"Zone Transfer (Transfer\xeancia de Zona)"}),"\n",(0,a.jsx)(n.p,{children:"A transfer\xeancia de zona DNS \xe9 uma opera\xe7\xe3o que replica o conte\xfado de uma zona\nDNS (mapeamento de nomes de dom\xednio para IPs) de um servidor prim\xe1rio para\nservidores secund\xe1rios, garantindo redund\xe2ncia e consist\xeancia de dados, usando\ngeralmente o protocolo TCP para um processo cliente-servidor AXFR (transfer\xeancia\ncompleta) ou IXFR (transfer\xeancia incremental). O problema \xe9 que se mal\nconfigurado o servi\xe7o de DNS, ele pode aceitar transfer\xeancia de qualquer\nendere\xe7o, vazazando todo o mapa de hosts do dom\xednio."}),"\n",(0,a.jsx)(n.p,{children:"Tentativa de transfer\xeancia de zona:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"host -l <hostname> <nameserver>\nhost -l alvo.com ns2.alvo.com\nhost -l -a alvo.com ns2.alvo.com # op\xe7\xe3o -a traz informa\xe7\xf5es adicionais\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"Em um Pentest, todos os nameservers devem ser validados.\nSe o nameserver aceitar AXFR, voc\xea ver\xe1 todos os registros (A, MX, CNAME, PTR,\netc.). Isso \xe9 uma descoberta de alto valor para pentest: lista de hosts,\nsubdom\xednios e IPs."}),(0,a.jsx)(n.p,{children:"Consultas repetidas e transfer\xeancias de zona podem gerar alarmes no IDS/IPS."})]}),"\n",(0,a.jsx)(n.h2,{id:"ptr---dns-reverso",children:"PTR - DNS Reverso"}),"\n",(0,a.jsx)(n.p,{children:"Com a consulta do DNS reverso, podemos descobrir nomes de host relacionados a um\nIP (\xfatil para correla\xe7\xe3o entre servi\xe7os e hosts)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ host 203.0.113.42\n42.113.0.203.in-addr.arpa domain name pointer host.example.com.\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"Algumas vers\xf5es o comando pode ser diferente:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"host -t ptr <IP>\n"})})]})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,o){o.d(n,{R:()=>i,x:()=>t});var s=o(6540);const a={},r=s.createContext(a);function i(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);